<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <title>登录</title>

    <link href="/css/login/common.css" rel="stylesheet" type="text/css">

    <link href="/css/login/dialog.css" rel="stylesheet" type="text/css">

    <link href="/css/login/common(1).css" rel="stylesheet" type="text/css">

    <link href="/css/login/zh-cn.css" rel="stylesheet" type="text/css">

    <link href="/css/loading.css" rel="stylesheet" type="text/css">

</head>
<body class="login themeName-red">

<div>
    <!-- 头部  -->
    <div class="customer-header">
        <div class="head_center">
            <div class="main-logo adHeadPicContainer"><img src="/image/HUAWEI.png" class="adHeadPic"></div>
            <div class="website-name"><b style="font-size: 18px;margin-top: -5px;float: left;color:#cccccc;">|</b> <b
                    class="adHeadTitle">地狗商城</b></div>
        </div>
    </div>

    <!--登录 -->
    <div class="login_bg" id="loginform">
        <div style="background-image: url('https://hwid1.vmall.com/CAS/up/idmw_rss_29/ads/login_default_bg.png');"
             class="g login_adBg">
            <div class="login-area login-right login-area-box">


                <div class="userAccountLogin">

                    <div class="h">

                        <span class="actived" id="pwd-login">帐号登录</span><span
                            class="unactived" id="code-login">验证码登录</span>


                    </div>
                    <!--使用密码登录-->
                    <div class="b-account" id="login1" style="display: block;">
                        <div class="login-form-marginTop">
                            <div class="form-edit-area loginEventForm">
                                <div class="userAccountLogin-errorTipsDiv" id="errorTip"></div>
                                <div style="margin-top: 30px">
                                    <label id="error1" style="color: red; visibility: hidden"></label>
                                </div>

                                <table border="0" cellpadding="0" cellspacing="0">
                                    <tbody>
                                    <tr>
                                        <td class="user-input-tr"><label class="lb_opacity_Class"
                                                                         style="display: none; position: absolute; cursor: text; float: left; z-index: 2; padding-left: 0px; padding-top: 0px;"
                                                                         for="login_userName">
                                        </label><input type="text" autocomplete="off" class="text vam"
                                                       id="login_userName" name="userAccount" maxlength="50"
                                                       tabindex="1" style="z-index: 1;" placeholder="请输入手机号"></td>
                                    </tr>

                                    <tr>
                                        <td class="user-input-tr"><label class="lb_opacity_Class"
                                                                         style="display: none; position: absolute; cursor: text; float: left; z-index: 2; padding-left: 0px; padding-top: 0px;"
                                                                         for="login_password">
                                        </label><input oncut="return false;" oncopy="return false" id="login_password"
                                                       type="password" autocomplete="off" class="text vam"
                                                       name="password" maxlength="32" tabindex="2"
                                                       style="z-index: 1;" placeholder="请输入密码"></td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div style="margin-bottom:0; margin-top: 40px"><span class="vam error" id="pwd_login_msg"
                                                                                style="display: none;"></span></div>
                                            <input type="button" class="button-login" id="btnLogin"
                                                   data-type="accountLogin" value="登录" tabindex="5">
                                            <img class="load">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="mt-checkbox">
                                            <span id="rememberNameSpan"><input type="checkbox" class="checkbox vam"
                                                                               id="remember_me" name="remember_me"
                                                                               tabindex="4"><label for="remember_me"
                                                                                                   style="vertical-align:middle;">记住帐号</label></span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="mt-links p0">
                                            <div class="mt-links-float vam clearWidth">
                                                <span class="regist"><a id="registText" class="btn-primary clearWidth"
                                                                        href="/user/register"
                                                                        title="注册帐号">注册帐号</a></span><span
                                                    class="forgot"><a class="btn-primary clearWidth"
                                                                      href=""
                                                                      title="忘记密码？">忘记密码？</a></span>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>


                    </div>

                    <!--使用验证码登录-->
                    <div class="b-account" id="login2" style="display: none;">
                        <div class="login-form-marginTop smsLogin-form">
                            <div class="form-edit-area loginEventForm">
                                <div class="smsValidateLogin-errorTipsDiv"></div>
                                <table border="0" cellpadding="0" cellspacing="0">
                                    <tbody>
                                    <tr>
                                        <td class="user-input-tr chooseCountryTD">
                                            <!-- 国家/地区-->
                                            <div class="l" id="chooseCountry">

                                                <div id="smsLoginCountryCodeDiv" class="ddrop-EMU5">
                                                    <span class="select-text ar-eg" data-regions="cn"
                                                          data-countrycode="+86"
                                                          data-countrysite="1">+86  中国  </span><span class="suffix"
                                                                                                     style="color: rgb(51, 51, 51);"></span>
                                                </div>
                                            </div>
                                            <div class="splitLine l">
                                            </div>
                                            <div class="overFlowHidden">
                                                <input type="text" autocomplete="off" class="text vam"
                                                       id="login_phoneNum" name="userAccount" maxlength="50"
                                                       tabindex="1" placeholder="请输入手机号">
                                            </div>
                                        </td>
                                    </tr>

                                    <!-- 图形验证码 -->
                                    <tr>
                                        <td class="referenceTarget user-input-tr"><label class="lb_opacity_Class"
                                                                                         style="display: block; position: absolute; cursor: text; float: left; z-index: 2; padding-left: 0px; padding-top: 0px;"
                                                                                         for="smsAuthCode">

                                        </label><input type="text" autocomplete="off" class="text vam" id="smsAuthCode"
                                                       name="smsAuthCode" maxlength="8" tabindex="3"
                                                       validator="validator41553595406539" style="z-index: 1;"
                                                       placeholder="请输入短信验证码">
                                            <div id="getSmsRandomCodeDiv">
                                                <div id="getSmsRandomCode" intervaltime="60"
                                                     class="smsAuthBth btnUnable"><span>获取验证码</span>
                                                    <div id="smsAuthCodeTips"></div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="mt-links lineHeightFix" style="visibility: hidden"></td>
                                    </tr>
                                    <tr>
                                        <td>
                                            <div style="margin-bottom:0px;"><span class="vam error" id="login_msg"
                                                                                  style="display:block"></span></div>
                                            <input type="button" class="button-login" id="btnSMSLogin"
                                                   data-type="smsLogin" value="登录" tabindex="5">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="mt-checkbox">
                                            <span id="sms-rememberNameSpan"><input type="checkbox" class="checkbox vam"
                                                                                   id="remember_smsMe"
                                                                                   name="remember_smsMe"
                                                                                   tabindex="4"><label
                                                    for="remember_smsMe"
                                                    style="vertical-align:middle;">记住帐号</label></span>
                                            <div class="hidden remeberTip"></div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td class="mt-links p0">
                                            <div class="mt-links-float vam clearWidth">
                                                <span class="regist"><a class="btn-primary clearWidth"
                                                                        href="/user/register"
                                                                        title="注册帐号">注册帐号</a></span><span
                                                    class="forgot"><a class="btn-primary clearWidth"
                                                                      href=""
                                                                      title="忘记密码？">忘记密码？</a></span>
                                            </div>
                                        </td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
<div class="ol_box_mask" style="visibility: hidden; top: 0;
    left: 0; opacity: .4; position: fixed; z-index: 5000; width: 1000px; height: 500px"></div>
<div class="loader" style="width: 100px; height : 64px; position: fixed; visibility: hidden">
    <div class="loader-inner ball-spin-fade-loader">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>

<script src="/jquery/jquery-3.2.1.min.js"></script>
<script type="text/javascript">
    $("#pwd-login").click(function () {
        if ($("#pwd-login").attr("class") != "actived") {
            $("#pwd-login").attr("class", "actived");
            $("#code-login").attr("class", "unactived");
            $("#login1").css("display", "block");
            $("#login2").css("display", "none");
        }
    });
    $("#code-login").click(function () {
        if ($("#code-login").attr("class") != "actived") {
            $("#code-login").attr("class", "actived");
            $("#pwd-login").attr("class", "unactived");
            $("#login2").css("display", "block");
            $("#login1").css("display", "none");
        }
    });
    $("#btnLogin").click(function () {
        startLoading();
        var tel = $("#login_userName").val();
        var pwd = $("#login_password").val();
        $.ajax({
            type: "POST",
            url: "http://localhost:7006/user/login",
            data: JSON.stringify({
                "password" : pwd,
                "mobile" : tel
            }),
            contentType: "application/json",
            dataType: "json",
            success: function (data) {
                endLoading();
                if (data.code == 200) {
                    window.location.href="/homepage";
                } else if (data.message == "用户不存在") {
                    $("#error1").html("手机号未注册").css("visibility", "visible");
                } else if (data.message == "密码错误") {
                    $("#error1").html("密码错误").css("visibility", "visible");
                }
            }
        })
    });

    $("#login_userName").focus(function () {
        if ($("#error1").html() == "手机号未注册") {
            $("#error1").css("visibility", "hidden");
        }
    });
    $("#login_password").focus(function () {
        if ($("#error1").html() == "密码错误") {
            $("#error1").css("visibility", "hidden");
        }
    });

    function startLoading() {
        var height = $("body").height();
        var width = $("body").width();
        var left = $(".login-area").offset().left + $(".login-area").width() / 2 - 10;
        var top = $("table").offset().top + $("table").height() / 2;
        $(".ol_box_mask").css("visibility", "visible").css("width", width).css("height", height).css("background-color", "ghostwhite");
        $(".loader").css("visibility", "visible").css("left", left).css("top", top);
    }

    function endLoading() {
        $(".ol_box_mask").css("visibility", "hidden");
        $(".loader").css("visibility", "hidden");
    }

</script>
</body>

</html>